/**
 * @formvuelate/plugin-vee-validate v2.4.0
 * (c) 2021 Abdelrahman Awad <logaretm1@gmail.com>
 * @license MIT
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue"),require("vee-validate")):"function"==typeof define&&define.amd?define(["vue","vee-validate"],t):e["@formvuelate/pluginVeeValidate"]=t(e.Vue,e.VeeValidate)}(this,function(S,V){"use strict";function t(e){return{validation:e}}var d="vee-validate-fvl-form-context";var m=new Map;return function(e){var c=e&&e.mapProps||t;return function(e){var a=e.parsedSchema,t=e.formBinds,n=S.getCurrentInstance().attrs,i=S.inject(d,void 0);i||(i=V.useForm({validationSchema:n["validation-schema"]||n.validationSchema,initialErrors:n["initial-errors"]||n.initialErrors,initialTouched:n["initial-touched"]||n.initialTouched}),S.provide(d,i));var r=i.handleSubmit;function o(t,a){if(void 0===a&&(a=""),t.schema){a=a?a+"."+t.model:t.model;var e=Array.isArray(t.schema)?t.schema:Object.keys(t.schema).map(function(e){return Object.assign({},{model:e},t.schema[e])});return Object.assign({},t,{schema:e.map(function(e){return o(e,a)})})}return Object.assign({},t,{_veeValidateConfig:{mapProps:c,path:a},component:function(j){var y=j.component;if(m.has(y))return m.get(y);var e=S.markRaw({name:"withFieldWrapper",props:{label:{type:String,default:void 0},modelValue:{type:null,default:void 0},validations:{type:[String,Object,Function],default:void 0},_veeValidateConfig:{type:Object,required:!0}},setup:function(e,t){var a=t.attrs,n=e._veeValidateConfig,i=n.path,r=n.mapProps,o=S.toRefs(e),u=o.validations,s=o.modelValue,l=s?s.value:void 0,c=S.computed(function(){return e.label}),d=i?i+"."+a.model:a.model,m=V.useField(d,u,{initialValue:l,label:c}),v=m.value,f=m.errorMessage,p=m.meta,h=m.setTouched,b=m.errors;s&&S.watch(s,function(e){v.value=e});var g=S.resolveDynamicComponent(y);return function(){return S.h(g,Object.assign({},e,a,r({errorMessage:S.unref(f),errors:S.unref(b),meta:p,setTouched:h},j)))}}});return m.set(y,e),e}(t)})}var u=S.computed(function(){return e=a.value,t=o,e.map(function(e){return e.map(function(e){return t(e)})});var e,t}),s=t.value.onSubmit,l=r(function(e,t){var a=t.evt;s(a)});return Object.assign({},e,{formBinds:S.computed(function(){return Object.assign({},e.formBinds.value,{onSubmit:l})}),slotBinds:S.computed(function(){return Object.assign({},e.slotBinds.value,{validation:{errors:i.errors.value,values:i.values,isSubmitting:i.isSubmitting.value,submitCount:i.submitCount.value,meta:i.meta.value}})}),parsedSchema:u})}}});