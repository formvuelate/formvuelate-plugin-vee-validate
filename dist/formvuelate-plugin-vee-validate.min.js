/**
 * @formvuelate/plugin-vee-validate v1.0.6
 * (c) 2021 Abdelrahman Awad <logaretm1@gmail.com>
 * @license MIT
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue"),require("vee-validate")):"function"==typeof define&&define.amd?define(["exports","vue","vee-validate"],t):t(e["@formvuelate/pluginVeeValidate"]={},e.Vue,e.VeeValidate)}(this,function(e,V,O){"use strict";var d=function(e,t){return e.map(function(e){return e.map(function(e){return t(e)})})};function t(e){return{validation:e}}var i=new Map;function l(b){var j=b.component;if(i.has(j))return i.get(j);var e=V.markRaw({name:"withFieldWrapper",props:{modelValue:{type:[String,Number],default:void 0},validations:{type:[String,Object,Function],default:void 0},_veeValidateConfig:{type:Object,required:!0}},setup:function(e,t){var i=t.attrs,n=e._veeValidateConfig,a=n.path,r=n.mapProps,o=V.toRefs(e),u=o.validations,s=o.modelValue,c=s?s.value:void 0,d=a?a+"."+i.model:i.model,l=O.useField(d,u,{initialValue:c}),m=l.value,f=l.errorMessage,v=l.meta,p=l.setDirty,h=l.setTouched,g=l.errors;s&&V.watch(s,function(e){m.value=e});var y=V.resolveDynamicComponent(j);return function(){return V.h(y,Object.assign({},e,i,r({errorMessage:V.unref(f),errors:V.unref(g),meta:v,setDirty:p,setTouched:h},b)))}}});return i.set(j,e),e}e.mapElementsInSchema=d,e.default=function(e){var c=e&&e.mapProps||t;return function(e){var t=e.parsedSchema,i=e.formBinds,n=V.getCurrentInstance().attrs,a=O.useForm({validationSchema:n["validation-schema"]||n.validationSchema,initialErrors:n["initial-errors"]||n.initialErrors,initialDirty:n["initial-dirty"]||n.initialDirty,initialTouched:n["initial-touched"]||n.initialTouched}).handleSubmit;function r(t,i){if(void 0===i&&(i=""),t.schema){i=i?i+"."+t.model:t.model;var e=Array.isArray(t.schema)?t.schema:Object.keys(t.schema).map(function(e){return Object.assign({},{model:e},t.schema[e])});return Object.assign({},t,{schema:e.map(function(e){return r(e,i)})})}return Object.assign({},t,{_veeValidateConfig:{mapProps:c,path:i},component:l(t)})}var o=V.computed(function(){return d(t.value,r)}),u=i.value.onSubmit,s=a(function(e,t){var i=t.evt;u(i)});return Object.assign({},e,{formBinds:V.computed(function(){return Object.assign({},e.formBinds.value,{onSubmit:s})}),parsedSchema:o})}},e.withField=l,Object.defineProperty(e,"__esModule",{value:!0})});